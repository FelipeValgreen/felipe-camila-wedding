<!DOCTYPE html>
<html lang="es" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Matrimonio Civil de Felipe y Camila. Celebraci√≥n, Fiesta y Amor.">
    <title>Felipe & Camila | Matrimonio Civil</title>

    <!-- Google Fonts: Amatic SC, Lora, Cinzel Decorative, Montserrat -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@400;700&family=Cinzel+Decorative:wght@400;700&family=Great+Vibes&family=Lora:ital,wght@0,400;0,600;1,400&family=Montserrat:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Lato:wght@300;400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        sage: '#8FA382',
                        'sage-light': '#A9BFA8',
                        'sage-dark': '#6B7F60',
                        ivory: '#F9F9F7',
                        sand: '#D7C9B8', /* Warmer, kraft-paper like */
                        taupe: '#9A8C7D', /* New accent color */
                        'dusty-pink': '#D8B4A0',
                        'sky-blue': '#B4C5C4',
                        charcoal: '#2C3E50',
                        gold: '#C5A059', /* Bronze/Gold */
                        night: '#111827',
                        // Rustic Kraft Palette
                        'kraft-bg': '#D1BFA7',
                        'coffee-ink': '#5C4B3A',
                        'coffee-dark': '#3E3228',
                        'coffee-ink': '#5C4B3A',
                        'coffee-dark': '#3E3228',
                        'paper-white': '#Fdfbf7',
                        // New Colors
                        beige: '#E8E0D5',
                        mustard: '#E1B12C',
                    },
                    fontFamily: {
                        serif: ['Playfair Display', 'serif'],
                        sans: ['"Montserrat"', 'sans-serif'],
                        script: ['Great Vibes', 'cursive'],
                        // New Rustic Fonts
                        hand: ['"Amatic SC"', 'cursive'],
                        typewriter: ['"Lora"', 'serif'],
                    },
                    backgroundImage: {
                        'kraft-texture': "url('https://www.transparenttextures.com/patterns/natural-paper.png')",
                        'paper-texture': "url('https://www.transparenttextures.com/patterns/cream-paper.png')",
                        'sage-texture': "url('https://www.transparenttextures.com/patterns/cubes.png')", /* Subtle texture for envelope */
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'disco': 'disco 2s linear infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        disco: {
                            '0%': { filter: 'hue-rotate(0deg)' },
                            '100%': { filter: 'hue-rotate(360deg)' },
                        }
                    }
                }
            }
        }

        // C. Trivia Logic (Carousel Mode)
        const triviaForm = document.getElementById('trivia-form');
        const triviaSubmitBtn = document.getElementById('trivia-submit-btn');

        // Handle "Other" inputs
        document.querySelectorAll('.other-trigger').forEach(radio => {
            radio.addEventListener('change', (e) => {
                const targetId = e.target.dataset.target;
                const targetInput = document.getElementById(targetId);

                // Hide all other text inputs in this question group
                const questionGroup = e.target.closest('.space-y-3');
                questionGroup.querySelectorAll('input[type="text"]').forEach(input => input.classList.add('hidden'));

                // Show specific input
                targetInput.classList.remove('hidden');
                targetInput.focus();
            });
        });

        // Hide text inputs if main options selected
        document.querySelectorAll('input[type="radio"]:not(.other-trigger)').forEach(radio => {
            radio.addEventListener('change', (e) => {
                const questionGroup = e.target.closest('.space-y-3');
                questionGroup.querySelectorAll('input[type="text"]').forEach(input => input.classList.add('hidden'));
            });
        });

        if (triviaSubmitBtn) {
            triviaSubmitBtn.addEventListener('click', async () => {
                const formData = new FormData(triviaForm);
                let score = 0;
                const answers = {};

                // Correct Answers
                const key = {
                    q1: 'bocas',
                    q2: 'felipe',
                    q3: 'pisco',
                    q4: 'same', // Trick question!
                    q5: 'playa'
                };

                for (let [name, value] of formData.entries()) {
                    if (name.includes('other')) continue; // Skip text inputs for scoring logic for now
                    answers[name] = value;
                    if (value === key[name]) score++;
                }

                // Save to Supabase
                triviaSubmitBtn.disabled = true;
                triviaSubmitBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Guardando...';

                if (typeof window.saveTriviaResult === 'function') {
                    await window.saveTriviaResult(score, answers);
                }

                // Show Result
                alert(`¬°Tu puntaje es: ${score}/5!\n\nGracias por jugar.`);
                triviaSubmitBtn.disabled = false;
                triviaSubmitBtn.innerHTML = 'Ver Resultado üé≤';
            });
        }
    </script>

    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #8FA382;
            border-radius: 3px;
        }

        /* Transitions */
        body {
            transition: background-color 1.5s ease, color 1.5s ease;
        }

        .reveal {
            opacity: 0;
            transform: translateY(40px);
            transition: all 1s ease-out;
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Envelope Overlay */
        #envelope-overlay {
            transition: transform 1.5s cubic-bezier(0.77, 0, 0.175, 1);
        }

        body.locked {
            overflow: hidden;
        }

        /* Navigation */
        #main-nav {
            transition: transform 0.5s ease, background-color 0.5s ease;
            transform: translateY(-100%);
        }

        #main-nav.visible {
            transform: translateY(0);
        }

        #main-nav.scrolled {
            background-color: rgba(249, 249, 247, 0.95);
            backdrop-filter: blur(5px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        /* Polaroid Effect */
        .polaroid {
            background: white;
            padding: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, z-index 0s;
        }

        .polaroid:hover {
            z-index: 50;
            transform: scale(1.1) rotate(0deg) !important;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2);
        }

        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>

<body class="font-typewriter text-coffee-dark bg-kraft-bg antialiased locked bg-kraft-texture">

    <!-- RUSTIC KRAFT ENVELOPE OVERLAY (STRICT REPLICATION VERIFIED) -->
    <div id="envelope-overlay"
        class="fixed inset-0 z-[100] bg-[#F9F9F7] flex items-center justify-center p-4 overflow-hidden transition-transform duration-1000 ease-in-out">

        <!-- Global Texture Overlay -->
        <div
            class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/natural-paper.png')] opacity-40 pointer-events-none mix-blend-multiply">
        </div>

        <!-- 1. ESTRUCTURA DEL SOBRE (Envelope Container) -->
        <div class="relative w-full max-w-2xl aspect-[4/3] md:aspect-[1.6/1] bg-[#d2b48c] flex items-center justify-center shadow-2xl z-20"
            style="box-shadow: 0 25px 50px -12px rgba(62, 43, 30, 0.4);">

            <!-- Texture -->
            <div
                class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/natural-paper.png')] opacity-50 mix-blend-multiply pointer-events-none">
            </div>

            <!-- Flap (Triangular Cl√°sico) -->
            <div class="absolute top-0 left-0 w-full h-full z-30 pointer-events-none"
                style="clip-path: polygon(0 0, 50% 55%, 100% 0); background-color: #dcbfa0; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));">
                <div
                    class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/natural-paper.png')] opacity-40 mix-blend-multiply">
                </div>
                <!-- Border Line (V Shape) -->
                <div class="absolute top-0 left-0 w-full h-full border-t-0 border-l border-r border-b-0 border-[#8c735a]/30"
                    style="clip-path: polygon(0 0, 50% 55%, 100% 0);"></div>
                <!-- L√≠neas de borde para resaltar la V -->
                <svg class="absolute top-0 left-0 w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none">
                    <path d="M0,0 L50,55 L100,0" fill="none" stroke="rgba(92, 75, 58, 0.2)" stroke-width="0.5" />
                </svg>
            </div>

            <!-- 2. POSICIONAMIENTO DE ELEMENTOS -->

            <!-- Texto "Nuestra historia comienza aqu√≠" (ARRIBA EN LA SOLAPA) -->
            <div
                class="absolute top-[15%] left-1/2 transform -translate-x-1/2 z-40 text-center w-full max-w-[60%] px-4 pointer-events-none">
                <p class="font-script text-3xl md:text-5xl text-[#3E2B1E] leading-relaxed opacity-90"
                    style="text-shadow: 0 1px 0 rgba(255,255,255,0.3); transform: rotate(-2deg);">
                    Nuestra historia<br>comienza aqu√≠
                </p>
            </div>

            <!-- Sello de Cera (Wax Seal) - EN LA PUNTA DE LA V -->
            <div class="absolute top-[55%] left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-40 w-16 h-16 md:w-20 md:h-20 rounded-full flex items-center justify-center shadow-lg"
                style="background: radial-gradient(circle at 30% 30%, #c5a059, #8a6e3e, #5c4b3a); 
                       box-shadow: inset 2px 2px 4px rgba(255,255,255,0.3), inset -2px -2px 4px rgba(0,0,0,0.4), 0 4px 8px rgba(0,0,0,0.3);">
                <div class="w-12 h-12 md:w-16 md:h-16 border border-[#3e2b18]/20 rounded-full flex items-center justify-center"
                    style="box-shadow: inset 0 0 6px rgba(0,0,0,0.2);">
                    <i class="fa-solid fa-leaf text-2xl md:text-3xl text-[#5c4b3a] opacity-70"
                        style="transform: rotate(-45deg); text-shadow: 1px 1px 0 rgba(255,255,255,0.2);"></i>
                </div>
            </div>

            <!-- ESTAMPILLA BOHO (Top Right - Up Final Border Method) -->
            <!-- ESTAMPILLA BOHO FINAL (Cache Buster V2) -->
            <!-- ESTAMPILLA BOHO FINAL (Cache Buster V2 - Responsive Fix) -->
            <div id="stamp-container-final"
                class="absolute top-4 right-4 md:top-12 md:right-16 z-40 transform rotate-3 pointer-events-none"
                style="filter: drop-shadow(0 2px 3px rgba(0,0,0,0.2));">
                <!-- Stamp Paper (Borde dentado usando dashed border) -->
                <div class="relative w-20 h-28 md:w-32 md:h-40 bg-[#fdfbf7] flex items-center justify-center p-2"
                    style="border: 6px dashed #fdfbf7; background-clip: padding-box; border-radius: 2px;">

                    <!-- Imagen interior (Absolute Path) -->
                    <div class="w-full h-full overflow-hidden bg-[#fdfbf7]">
                        <img src="images/stamp_up_final_absolute.png?v=cache_buster_final"
                            class="w-full h-full object-cover contrast-110" alt="Stamp Final">
                    </div>
                </div>

                <!-- Timbre Postal (Postmark) -->
                <div
                    class="absolute bottom-[-5px] -left-4 w-20 h-20 md:w-24 md:h-24 z-40 opacity-80 mix-blend-multiply transform -rotate-12">
                    <div class="w-full h-full border-2 border-[#5c4b3e] rounded-full flex items-center justify-center">
                        <div
                            class="w-[85%] h-[85%] border border-[#5c4b3e] rounded-full flex items-center justify-center">
                            <i class="fa-solid fa-heart text-[#5c4b3e] text-xl"></i>
                        </div>
                    </div>
                    <!-- L√≠neas onduladas -->
                    <div class="absolute top-1/2 left-full w-10 h-6 border-t-2 border-b-2 border-[#5c4b3e] -ml-2"></div>
                </div>
            </div>

            <!-- Bot√≥n "ABRIR INVITACI√ìN" - Debajo del sello -->
            <button id="open-invite"
                class="absolute bottom-6 md:bottom-12 left-1/2 transform -translate-x-1/2 z-50 bg-[#3E2B1E] text-white px-6 md:px-8 py-2 md:py-3 rounded-sm shadow-lg hover:bg-[#2c1e15] transition-colors duration-300 cursor-pointer border border-[#5c4b3e]">
                <span class="font-sans text-xs md:text-sm tracking-[0.2em] uppercase font-bold whitespace-nowrap">Abrir
                    Invitaci√≥n</span>
            </button>

        </div>
    </div>

    <!-- NAVIGATION -->
    <nav id="main-nav" class="fixed top-0 left-0 w-full z-50 py-4 transition-all duration-300">
        <div class="max-w-6xl mx-auto px-6 flex justify-between items-center">
            <a href="#hero" class="font-serif text-2xl text-[#2C241E] font-bold">F&C</a>
            <div class="hidden md:flex space-x-8">
                <a href="#story"
                    class="text-xs uppercase tracking-widest text-[#2C241E] hover:text-[#6B7D5C] transition-colors">Historia</a>
                <a href="#dresscode"
                    class="text-xs uppercase tracking-widest text-[#2C241E] hover:text-[#6B7D5C] transition-colors">Dress
                    Code</a>
                <a href="#party"
                    class="text-xs uppercase tracking-widest text-[#2C241E] hover:text-[#6B7D5C] transition-colors font-bold">Fiesta</a>
                <a href="#rsvp"
                    class="text-xs uppercase tracking-widest text-[#2C241E] hover:text-[#6B7D5C] transition-colors">RSVP</a>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="relative overflow-hidden">

        <!-- A. HERO (CIVIL WEDDING) -->
        <section id="hero" class="min-h-screen flex items-center justify-center pt-24 pb-20 relative">
            <div class="text-center z-10 reveal px-4">
                <p class="font-sans text-xs tracking-[0.3em] text-[#556B2F] uppercase mb-4">Matrimonio Civil</p>
                <h1 class="font-serif text-7xl md:text-9xl text-[#556B2F] mb-6">Felipe & Camila</h1>
                <p class="font-hand text-3xl text-[#A68B5B] mb-8">¬°Nos casamos!</p>

                <div class="flex flex-col items-center space-y-2 mb-12">
                    <div class="flex justify-center items-center space-x-4">
                        <div class="h-[1px] w-12 bg-[#2C241E]"></div>
                        <p class="font-serif text-xl italic text-[#2C241E]">S√°bado 28 de Marzo, 2026</p>
                        <div class="h-[1px] w-12 bg-[#2C241E]"></div>
                    </div>
                    <p class="font-serif text-lg italic text-[#2C241E]">Hora de inicio 15:00 horas</p>
                </div>

                <!-- VINTAGE MAP ADDRESS CARD -->
                <!-- VINTAGE MAP ADDRESS CARD -->
                <a href="https://www.google.com/maps/search/?api=1&query=Avenida+El+Valle+147,+Casa+10,+Chicureo,+Santiago"
                    target="_blank" rel="noopener noreferrer"
                    class="block relative max-w-2xl mx-auto mt-8 p-10 bg-[#F5F1E8] rounded-3xl shadow-lg border-4 border-dashed border-[#B8A88A] transform hover:scale-[1.02] transition-all duration-300 cursor-pointer group">
                    <!-- Paper Texture Overlay -->
                    <div
                        class="absolute inset-0 rounded-3xl bg-[url('https://www.transparenttextures.com/patterns/natural-paper.png')] opacity-30 pointer-events-none mix-blend-multiply">
                    </div>

                    <!-- External Link Icon (Top Right) -->
                    <div
                        class="absolute top-4 right-4 text-[#B8A88A] opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <i class="fa-solid fa-arrow-up-right-from-square text-xl"></i>
                    </div>

                    <div class="relative z-10 flex flex-col items-center text-center space-y-6">
                        <!-- Map Pin Icon -->
                        <div
                            class="text-[#556B2F] text-5xl mb-2 drop-shadow-md group-hover:text-[#445525] transition-colors">
                            <i class="fa-solid fa-location-dot"></i>
                        </div>

                        <!-- Address Text -->
                        <h3
                            class="font-serif text-3xl md:text-4xl text-[#2C241E] leading-tight font-normal group-hover:text-black transition-colors">
                            Avenida El Valle 147, Casa 10
                        </h3>

                        <!-- Location Text -->
                        <p
                            class="font-sans text-base md:text-lg text-[#556B2F] uppercase tracking-[0.2em] font-semibold group-hover:text-[#445525] transition-colors">
                            Chicureo, Santiago
                        </p>
                    </div>
                </a>
            </div>
        </section>

        <!-- C. MUSIC QUOTE -->
        <section id="music" class="py-24 text-center reveal">
            <div class="w-16 h-px bg-sage mx-auto mb-8"></div>
            <blockquote class="font-script text-4xl md:text-5xl text-charcoal leading-relaxed mb-6">
                "We've come so far, my dear. <br>Look how we've grown. <br>And I wanna stay with you <br>until we're
                grey and old."
            </blockquote>
            <cite class="font-sans text-xs uppercase tracking-[0.2em] text-sage-dark not-italic">‚Äî James
                Arthur</cite>
            <div class="w-16 h-px bg-sage mx-auto mt-8"></div>
            </div>
        </section>

        <!-- D. DRESS CODE (MEDITERRANEAN) -->
        <section id="dresscode"
            class="py-32 bg-gradient-to-b from-ivory to-sky-blue/10 text-center relative overflow-hidden">
            <div class="max-w-3xl mx-auto px-4 relative z-10 reveal">
                <h2 class="font-serif text-4xl text-charcoal mb-2">C√≥digo de Vestimenta</h2>
                <p class="font-sans text-sage-dark text-sm uppercase tracking-widest mb-4 font-bold">Casual Mediterr√°neo
                </p>
                <p class="font-sans text-slate-500 text-xs italic mb-12">Les sugerimos telas frescas como lino y
                    algod√≥n. Esta paleta de colores es solo una inspiraci√≥n para armonizar con el entorno, ¬°si√©ntanse
                    libres de usar el tono que m√°s les acomode!</p>

                <div class="flex flex-wrap justify-center gap-8 mb-8">
                    <!-- Sage -->
                    <div class="flex flex-col items-center gap-2">
                        <div class="w-16 h-16 rounded-full bg-sage shadow-lg ring-4 ring-white"></div>
                        <span class="text-[10px] uppercase tracking-wider text-charcoal">Salvia</span>
                    </div>
                    <!-- Dusty Pink -->
                    <div class="flex flex-col items-center gap-2">
                        <div class="w-16 h-16 rounded-full bg-dusty-pink shadow-lg ring-4 ring-white"></div>
                        <span class="text-[10px] uppercase tracking-wider text-charcoal">Rosa Viejo</span>
                    </div>
                    <!-- Sand -->
                    <div class="flex flex-col items-center gap-2">
                        <div class="w-16 h-16 rounded-full bg-sand shadow-lg ring-4 ring-white"></div>
                        <span class="text-[10px] uppercase tracking-wider text-charcoal">Arena</span>
                    </div>
                    <!-- Sky Blue -->
                    <div class="flex flex-col items-center gap-2">
                        <div class="w-16 h-16 rounded-full bg-sky-blue shadow-lg ring-4 ring-white"></div>
                        <span class="text-[10px] uppercase tracking-wider text-charcoal">Celeste</span>
                    </div>
                    <!-- Beige -->
                    <div class="flex flex-col items-center gap-2">
                        <div class="w-16 h-16 rounded-full bg-beige shadow-lg ring-4 ring-white"></div>
                        <span class="text-[10px] uppercase tracking-wider text-charcoal">Beige</span>
                    </div>
                    <!-- Mustard -->
                    <div class="flex flex-col items-center gap-2">
                        <div class="w-16 h-16 rounded-full bg-mustard shadow-lg ring-4 ring-white"></div>
                        <span class="text-[10px] uppercase tracking-wider text-charcoal">Mostaza</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- E. PARTY (NEW SECTION) -->
        <section id="party" class="py-32 bg-night text-white relative overflow-hidden">
            <!-- Party Background Effects -->
            <div class="absolute inset-0 bg-gradient-to-br from-purple-900/20 to-blue-900/20"></div>
            <div
                class="absolute top-0 left-0 w-full h-full opacity-20 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]">
            </div>

            <div class="max-w-4xl mx-auto px-4 text-center relative z-10 reveal">
                <p class="font-sans text-sm tracking-[0.5em] uppercase text-gold mb-6 animate-pulse-slow">Let's Party
                </p>
                <h2
                    class="font-serif text-6xl md:text-8xl mb-12 text-transparent bg-clip-text bg-gradient-to-r from-white via-gold to-white animate-disco">
                    ¬°A Celebrar!</h2>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-12 text-center">
                    <!-- Ceremonia -->
                    <div class="group flex flex-col items-center">
                        <div class="w-16 h-16 mb-6 group-hover:scale-110 transition-transform duration-500">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"
                                class="w-full h-full text-gold group-hover:text-sage transition-colors duration-300">
                                <circle cx="8" cy="12" r="6" />
                                <circle cx="16" cy="12" r="6" />
                            </svg>
                        </div>
                        <h3
                            class="font-serif text-2xl mb-2 text-gold group-hover:text-sage transition-colors duration-300">
                            Ceremonia</h3>
                        <p class="text-white/60 text-sm">El "S√≠" quiero</p>
                    </div>

                    <!-- C√≥ctel -->
                    <div class="group flex flex-col items-center">
                        <div class="w-16 h-16 mb-6 group-hover:scale-110 transition-transform duration-500">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"
                                class="w-full h-full text-gold group-hover:text-sage transition-colors duration-300">
                                <path
                                    d="M8 21h8m-4-4v4M12 3a6 6 0 0 1 6 6c0 1.66-.67 3.16-1.76 4.24l-4.24 4.24-4.24-4.24A6 6 0 0 1 6 9a6 6 0 0 1 6-6z" />
                                <line x1="12" y1="10" x2="12" y2="3" />
                                <line x1="12" y1="10" x2="16" y2="6" />
                            </svg>
                        </div>
                        <h3
                            class="font-serif text-2xl mb-2 text-gold group-hover:text-sage transition-colors duration-300">
                            C√≥ctel</h3>
                        <p class="text-white/60 text-sm">Para compartir y celebrar</p>
                    </div>

                    <!-- Fiesta -->
                    <div class="group flex flex-col items-center">
                        <div class="w-16 h-16 mb-6 group-hover:scale-110 transition-transform duration-500">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"
                                class="w-full h-full text-gold group-hover:text-sage transition-colors duration-300">
                                <circle cx="12" cy="12" r="10" />
                                <path d="M12 2v20M2 12h20M4.93 4.93l14.14 14.14M4.93 19.07L19.07 4.93" />
                            </svg>
                        </div>
                        <h3
                            class="font-serif text-2xl mb-2 text-gold group-hover:text-sage transition-colors duration-300">
                            Fiesta</h3>
                        <p class="text-white/60 text-sm">Baile hasta el amanecer</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- NEW INTERACTIVE SECTIONS START -->

        <!-- 1. GUEST PAPARAZZI ("A trav√©s de tus ojos") -->
        <section id="paparazzi" class="py-24 relative bg-ivory overflow-hidden">
            <!-- Decorative Film Strip (CSS/SVG) -->
            <div class="absolute top-0 right-0 h-full w-16 md:w-24 bg-charcoal opacity-10 flex flex-col items-center justify-around py-4 pointer-events-none"
                style="background-image: linear-gradient(to bottom, transparent 50%, white 50%); background-size: 100% 40px;">
                <div class="w-10 h-6 bg-white/50 rounded-sm"></div>
                <div class="w-10 h-6 bg-white/50 rounded-sm"></div>
                <div class="w-10 h-6 bg-white/50 rounded-sm"></div>
            </div>


            <div class="max-w-4xl mx-auto px-6 text-center relative z-10">
                <div class="mb-8 text-6xl text-charcoal/80 animate-pulse">
                    <i class="fa-solid fa-camera-retro"></i>
                </div>
                <h2 class="font-serif text-4xl md:text-5xl text-charcoal mb-4">A trav√©s de tus ojos</h2>
                <p class="font-sans text-slate-600 mb-10 max-w-xl mx-auto">
                    Queremos ver la fiesta desde tu perspectiva. √önete a nuestro √°lbum compartido y sube tus mejores
                    fotos (¬°y las peores tambi√©n!).
                </p>

                <!-- Upload Form -->
                <div class="bg-white p-8 rounded-xl shadow-xl max-w-md mx-auto mb-12 relative overflow-hidden">
                    <!-- Auth Overlay (Hidden if logged in) -->
                    <!-- Simple Name/Email Form (No OAuth) -->
                    <div class="mb-4">
                        <label class="block text-left text-xs font-bold uppercase tracking-widest text-charcoal mb-2">Tu
                            Nombre</label>
                        <input type="text" id="uploader-name" placeholder="Ej: T√≠a Coty"
                            class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:border-sage">
                    </div>
                    <div class="mb-4">
                        <label class="block text-left text-xs font-bold uppercase tracking-widest text-charcoal mb-2">Tu
                            Email (opcional)</label>
                        <input type="email" id="uploader-email" placeholder="tu@correo.com"
                            class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:border-sage">
                    </div>
                    <div class="mb-6">
                        <label
                            class="block text-left text-xs font-bold uppercase tracking-widest text-charcoal mb-2">Sube
                            tu Foto</label>
                        <input type="file" id="photo-upload" accept="image/*"
                            class="w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-sage/10 file:text-sage hover:file:bg-sage/20">
                    </div>
                    <button id="upload-btn"
                        class="w-full bg-charcoal text-ivory font-bold py-3 rounded-lg hover:bg-sage transition-colors uppercase tracking-widest">
                        <i class="fa-solid fa-cloud-arrow-up mr-2"></i> Subir Foto
                    </button>
                    <p id="upload-status" class="mt-4 text-xs font-bold hidden"></p>
                </div>

                <!-- Live Gallery Carousel Container -->
                <div class="relative group max-w-6xl mx-auto">
                    <!-- Navigation Arrows -->
                    <button
                        onclick="document.getElementById('guest-gallery').scrollBy({left: -300, behavior: 'smooth'})"
                        class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-2 md:-translate-x-6 bg-white/80 hover:bg-white text-charcoal w-10 h-10 rounded-full shadow-lg flex items-center justify-center transition-all z-20 opacity-0 group-hover:opacity-100">
                        <i class="fa-solid fa-chevron-left"></i>
                    </button>
                    <button onclick="document.getElementById('guest-gallery').scrollBy({left: 300, behavior: 'smooth'})"
                        class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-2 md:translate-x-6 bg-white/80 hover:bg-white text-charcoal w-10 h-10 rounded-full shadow-lg flex items-center justify-center transition-all z-20 opacity-0 group-hover:opacity-100">
                        <i class="fa-solid fa-chevron-right"></i>
                    </button>

                    <div id="guest-gallery"
                        class="flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 px-4 scrollbar-hide h-80 justify-start">
                        <!-- Photos will be loaded dynamically from Supabase -->
                        <div class="min-w-[300px] flex items-center justify-center text-center">
                            <div class="text-sage-dark/60">
                                <i class="fa-solid fa-camera text-4xl mb-3"></i>
                                <p class="font-serif text-lg">S√© el primero en compartir un momento</p>
                                <p class="text-sm text-sage-dark/40 mt-2">Sube tu foto arriba üì∏</p>
                            </div>
                        </div>

                        <!-- New Image 7 -->
                        <div
                            class="min-w-[220px] aspect-[4/5] relative flex-shrink-0 bg-white p-2 shadow-md transform rotate-2 hover:rotate-0 transition-transform snap-center">
                            <img src="images/guest_example_7.jpg" class="w-full h-full object-cover">
                            <div
                                class="absolute bottom-4 left-2 right-2 flex items-center justify-center gap-2 bg-white/90 backdrop-blur-sm py-1 rounded-full shadow-sm">
                                <img src="images/guest_example_1.jpg"
                                    class="w-6 h-6 rounded-full object-cover border border-gray-200">
                                <span class="font-handwriting text-charcoal text-sm">Felipe Valverde</span>
                            </div>
                        </div>
                        <!-- New Image 8 -->
                        <div
                            class="min-w-[220px] aspect-[4/5] relative flex-shrink-0 bg-white p-2 shadow-md transform -rotate-2 hover:rotate-0 transition-transform snap-center">
                            <img src="images/guest_example_8.jpg" class="w-full h-full object-cover">
                            <div
                                class="absolute bottom-4 left-2 right-2 flex items-center justify-center gap-2 bg-white/90 backdrop-blur-sm py-1 rounded-full shadow-sm">
                                <img src="images/guest_example_1.jpg"
                                    class="w-6 h-6 rounded-full object-cover border border-gray-200">
                                <span class="font-handwriting text-charcoal text-sm">Felipe Valverde</span>
                            </div>
                        </div>
                        <!-- New Image 9 -->
                        <div
                            class="min-w-[220px] aspect-[4/5] relative flex-shrink-0 bg-white p-2 shadow-md transform rotate-1 hover:rotate-0 transition-transform snap-center">
                            <img src="images/guest_example_9.jpg" class="w-full h-full object-cover">
                            <div
                                class="absolute bottom-4 left-2 right-2 flex items-center justify-center gap-2 bg-white/90 backdrop-blur-sm py-1 rounded-full shadow-sm">
                                <img src="images/guest_example_1.jpg"
                                    class="w-6 h-6 rounded-full object-cover border border-gray-200">
                                <span class="font-handwriting text-charcoal text-sm">Felipe Valverde</span>
                            </div>
                        </div>
                        <!-- New Image 10 -->
                        <div
                            class="min-w-[220px] aspect-[4/5] relative flex-shrink-0 bg-white p-2 shadow-md transform -rotate-1 hover:rotate-0 transition-transform snap-center">
                            <img src="images/guest_example_10.jpg" class="w-full h-full object-cover">
                            <div
                                class="absolute bottom-4 left-2 right-2 flex items-center justify-center gap-2 bg-white/90 backdrop-blur-sm py-1 rounded-full shadow-sm">
                                <img src="images/guest_example_1.jpg"
                                    class="w-6 h-6 rounded-full object-cover border border-gray-200">
                                <span class="font-handwriting text-charcoal text-sm">Felipe Valverde</span>
                            </div>
                        </div>
                        <!-- New Image 11 -->
                        <div
                            class="min-w-[220px] aspect-[4/5] relative flex-shrink-0 bg-white p-2 shadow-md transform rotate-2 hover:rotate-0 transition-transform snap-center">
                            <img src="images/guest_example_11.jpg" class="w-full h-full object-cover">
                            <div
                                class="absolute bottom-4 left-2 right-2 flex items-center justify-center gap-2 bg-white/90 backdrop-blur-sm py-1 rounded-full shadow-sm">
                                <img src="images/guest_example_1.jpg"
                                    class="w-6 h-6 rounded-full object-cover border border-gray-200">
                                <span class="font-handwriting text-charcoal text-sm">Felipe Valverde</span>
                            </div>
                        </div>

                        <!-- New Image 13 -->
                        <div
                            class="min-w-[220px] aspect-[4/5] relative flex-shrink-0 bg-white p-2 shadow-md transform rotate-1 hover:rotate-0 transition-transform snap-center">
                            <img src="images/guest_example_13.jpg" class="w-full h-full object-cover">
                            <div
                                class="absolute bottom-4 left-2 right-2 flex items-center justify-center gap-2 bg-white/90 backdrop-blur-sm py-1 rounded-full shadow-sm">
                                <img src="images/guest_example_1.jpg"
                                    class="w-6 h-6 rounded-full object-cover border border-gray-200">
                                <span class="font-handwriting text-charcoal text-sm">Felipe Valverde</span>
                            </div>
                        </div>
                        <!-- New Image 14 -->
                        <div
                            class="min-w-[220px] aspect-[4/5] relative flex-shrink-0 bg-white p-2 shadow-md transform -rotate-1 hover:rotate-0 transition-transform snap-center">
                            <img src="images/guest_example_14.jpg" class="w-full h-full object-cover">
                            <div
                                class="absolute bottom-4 left-2 right-2 flex items-center justify-center gap-2 bg-white/90 backdrop-blur-sm py-1 rounded-full shadow-sm">
                                <img src="images/guest_example_1.jpg"
                                    class="w-6 h-6 rounded-full object-cover border border-gray-200">
                                <span class="font-handwriting text-charcoal text-sm">Felipe Valverde</span>
                            </div>
                        </div>

                        <!-- New Image 16 -->
                        <div
                            class="min-w-[220px] aspect-[4/5] relative flex-shrink-0 bg-white p-2 shadow-md transform -rotate-2 hover:rotate-0 transition-transform snap-center">
                            <img src="images/guest_example_16.jpg" class="w-full h-full object-cover">
                            <div
                                class="absolute bottom-4 left-2 right-2 flex items-center justify-center gap-2 bg-white/90 backdrop-blur-sm py-1 rounded-full shadow-sm">
                                <img src="images/guest_example_1.jpg"
                                    class="w-6 h-6 rounded-full object-cover border border-gray-200">
                                <span class="font-handwriting text-charcoal text-sm">Felipe Valverde</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- OUR STORY SECTION (Polaroid Collage) -->
        <section id="our-story"
            class="py-32 bg-gradient-to-b from-ivory via-sage-light/20 to-ivory relative overflow-hidden">
            <!-- Decorative Elements -->
            <div class="absolute top-0 left-0 w-64 h-64 bg-sage/10 rounded-full blur-3xl"></div>
            <div class="absolute bottom-0 right-0 w-96 h-96 bg-gold/10 rounded-full blur-3xl"></div>

            <div class="max-w-7xl mx-auto px-6 relative z-10">
                <!-- Section Title -->
                <div class="text-center mb-16">
                    <h2 class="font-serif text-5xl md:text-6xl text-charcoal mb-4">Nuestra Historia</h2>
                    <div class="w-24 h-1 bg-gold mx-auto mb-6"></div>
                    <p class="font-sans text-lg text-slate-600 max-w-2xl mx-auto italic">
                        "Dos almas que se encontraron por serendipia y decidieron escribir juntas su historia de amor"
                    </p>
                </div>

                <!-- Timeline with Polaroid Photos -->
                <div class="grid md:grid-cols-3 gap-12 mb-16">
                    <!-- Chapter 1: Serendipia -->
                    <div class="text-center">
                        <div
                            class="relative inline-block mb-6 transform hover:scale-105 transition-transform duration-300">
                            <!-- Polaroid Frame -->
                            <div class="bg-white p-4 shadow-2xl transform rotate-2 hover:rotate-0 transition-transform">
                                <div class="aspect-square bg-gray-200 mb-3 overflow-hidden">
                                    <img src="images/new_story_1.jpg" alt="Serendipia"
                                        class="w-full h-full object-cover">
                                </div>
                                <p class="font-handwriting text-charcoal text-lg">Serendipia ‚ú®</p>
                            </div>
                            <!-- Decorative Pin -->
                            <div
                                class="absolute -top-3 left-1/2 transform -translate-x-1/2 w-6 h-6 bg-gold rounded-full shadow-lg">
                            </div>
                        </div>
                        <h3 class="font-serif text-2xl text-charcoal mb-3">Cap√≠tulo 1: Serendipia</h3>
                        <p class="text-slate-600 leading-relaxed">
                            El destino nos uni√≥ en el momento perfecto. Un encuentro casual que cambi√≥ nuestras vidas
                            para siempre.
                        </p>
                    </div>

                    <!-- Chapter 2: De Bocas del Toro a Santiago -->
                    <div class="text-center">
                        <div
                            class="relative inline-block mb-6 transform hover:scale-105 transition-transform duration-300">
                            <!-- Polaroid Frame -->
                            <div
                                class="bg-white p-4 shadow-2xl transform -rotate-1 hover:rotate-0 transition-transform">
                                <div class="aspect-square bg-gray-200 mb-3 overflow-hidden">
                                    <img src="images/new_story_2.jpg" alt="Bocas a Santiago"
                                        class="w-full h-full object-cover">
                                </div>
                                <p class="font-handwriting text-charcoal text-lg">Bocas ‚Üí Santiago üå¥‚úàÔ∏è</p>
                            </div>
                            <!-- Decorative Pin -->
                            <div
                                class="absolute -top-3 left-1/2 transform -translate-x-1/2 w-6 h-6 bg-sage rounded-full shadow-lg">
                            </div>
                        </div>
                        <h3 class="font-serif text-2xl text-charcoal mb-3">Cap√≠tulo 2: De Bocas del Toro a Santiago</h3>
                        <p class="text-slate-600 leading-relaxed">
                            Desde las playas paradis√≠acas de Panam√° hasta las monta√±as de Chile, nuestro amor cruz√≥
                            fronteras.
                        </p>
                    </div>

                    <!-- Chapter 3: De Santiago al Mundo -->
                    <div class="text-center">
                        <div
                            class="relative inline-block mb-6 transform hover:scale-105 transition-transform duration-300">
                            <!-- Polaroid Frame -->
                            <div class="bg-white p-4 shadow-2xl transform rotate-3 hover:rotate-0 transition-transform">
                                <div class="aspect-square bg-gray-200 mb-3 overflow-hidden">
                                    <img src="images/new_story_3.jpg" alt="Santiago al Mundo"
                                        class="w-full h-full object-cover">
                                </div>
                                <p class="font-handwriting text-charcoal text-lg">Al Mundo üåçüíï</p>
                            </div>
                            <!-- Decorative Pin -->
                            <div
                                class="absolute -top-3 left-1/2 transform -translate-x-1/2 w-6 h-6 bg-gold rounded-full shadow-lg">
                            </div>
                        </div>
                        <h3 class="font-serif text-2xl text-charcoal mb-3">Cap√≠tulo 3: De Santiago al Mundo</h3>
                        <p class="text-slate-600 leading-relaxed">
                            Juntos conquistamos el mundo, creando recuerdos inolvidables en cada aventura que vivimos.
                        </p>
                    </div>
                </div>

                <!-- Quote -->
                <div
                    class="text-center max-w-3xl mx-auto bg-white/60 backdrop-blur-sm p-8 rounded-2xl shadow-lg border border-sage/20">
                    <i class="fa-solid fa-quote-left text-3xl text-gold mb-4"></i>
                    <p class="font-serif text-2xl text-charcoal italic mb-4">
                        "Y ahora, despu√©s de tantas aventuras juntos, estamos listos para el cap√≠tulo m√°s hermoso:
                        <span class="text-sage-dark font-bold">Nuestro Matrimonio</span>"
                    </p>
                    <i class="fa-solid fa-quote-right text-3xl text-gold"></i>
                </div>
            </div>
        </section>

        <!-- INSTAGRAM FEED (#felipeycami) -->
        <section id="instagram" class="py-24 bg-white relative overflow-hidden">
            <div class="max-w-6xl mx-auto px-4 text-center">
                <div class="flex items-center justify-center gap-3 mb-8 text-charcoal">
                    <i class="fa-brands fa-instagram text-4xl"></i>
                    <h2 class="font-serif text-3xl md:text-4xl">#felipeycami</h2>
                </div>
                <p class="font-sans text-slate-500 mb-12">Etiqu√©tanos en tus fotos para que aparezcan aqu√≠.</p>

                <!-- Instagram Grid Container -->
                <div class="grid grid-cols-3 md:grid-cols-6 gap-1 md:gap-4 mb-12">
                    <!-- Photo 1 -->
                    <div class="aspect-square overflow-hidden relative group cursor-pointer">
                        <img src="images/insta_party_1.jpg"
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            alt="Instagram Photo">
                        <div
                            class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <i class="fa-brands fa-instagram text-white text-xl"></i>
                        </div>
                    </div>
                    <!-- Photo 2 -->
                    <div class="aspect-square overflow-hidden relative group cursor-pointer">
                        <img src="images/insta_party_2.jpg"
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            alt="Instagram Photo">
                        <div
                            class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <i class="fa-brands fa-instagram text-white text-xl"></i>
                        </div>
                    </div>
                    <!-- Photo 3 -->
                    <div class="aspect-square overflow-hidden relative group cursor-pointer">
                        <img src="images/insta_party_selfie.jpg"
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            alt="Instagram Photo">
                        <div
                            class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <i class="fa-brands fa-instagram text-white text-xl"></i>
                        </div>
                    </div>
                    <!-- Photo 4 -->
                    <div class="aspect-square overflow-hidden relative group cursor-pointer">
                        <img src="images/insta_bar_group.jpg"
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            alt="Instagram Photo">
                        <div
                            class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <i class="fa-brands fa-instagram text-white text-xl"></i>
                        </div>
                    </div>
                    <!-- Photo 5 -->
                    <div class="aspect-square overflow-hidden relative group cursor-pointer">
                        <img src="images/insta_bbq.jpg"
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            alt="Instagram Photo">
                        <div
                            class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <i class="fa-brands fa-instagram text-white text-xl"></i>
                        </div>
                    </div>
                    <!-- Photo 6 -->
                    <div class="aspect-square overflow-hidden relative group cursor-pointer">
                        <img src="images/insta_beach_group.jpg"
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            alt="Instagram Photo">
                        <div
                            class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <i class="fa-brands fa-instagram text-white text-xl"></i>
                        </div>
                    </div>
                    <!-- Photo 7 -->
                    <div class="aspect-square overflow-hidden relative group cursor-pointer">
                        <img src="images/insta_beach_selfie.jpg"
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            alt="Instagram Photo">
                        <div
                            class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <i class="fa-brands fa-instagram text-white text-xl"></i>
                        </div>
                    </div>
                    <!-- Photo 8 -->
                    <div class="aspect-square overflow-hidden relative group cursor-pointer">
                        <img src="images/insta_boat_group.jpg"
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            alt="Instagram Photo">
                        <div
                            class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <i class="fa-brands fa-instagram text-white text-xl"></i>
                        </div>
                    </div>
                    <!-- Photo 9 -->
                    <div class="aspect-square overflow-hidden relative group cursor-pointer">
                        <img src="images/insta_car_group.jpg"
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            alt="Instagram Photo">
                        <div
                            class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <i class="fa-brands fa-instagram text-white text-xl"></i>
                        </div>
                    </div>
                    <!-- Photo 10 -->
                    <div class="aspect-square overflow-hidden relative group cursor-pointer">
                        <img src="images/insta_family_selfie.jpg"
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            alt="Instagram Photo">
                        <div
                            class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <i class="fa-brands fa-instagram text-white text-xl"></i>
                        </div>
                    </div>
                    <!-- Photo 11 -->
                    <div class="aspect-square overflow-hidden relative group cursor-pointer">
                        <img src="images/insta_formal_group.jpg"
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            alt="Instagram Photo">
                        <div
                            class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <i class="fa-brands fa-instagram text-white text-xl"></i>
                        </div>
                    </div>
                    <!-- Photo 12 -->
                    <div class="aspect-square overflow-hidden relative group cursor-pointer">
                        <img src="images/insta_formal_selfie.jpg"
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            alt="Instagram Photo">
                        <div
                            class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <i class="fa-brands fa-instagram text-white text-xl"></i>
                        </div>
                    </div>
                    <!-- Photo 13 -->
                    <div class="aspect-square overflow-hidden relative group cursor-pointer">
                        <img src="images/insta_hiking.jpg"
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            alt="Instagram Photo">
                        <div
                            class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <i class="fa-brands fa-instagram text-white text-xl"></i>
                        </div>
                    </div>
                    <!-- Photo 14 -->
                    <div class="aspect-square overflow-hidden relative group cursor-pointer">
                        <img src="images/insta_hiking_group.jpg"
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            alt="Instagram Photo">
                        <div
                            class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <i class="fa-brands fa-instagram text-white text-xl"></i>
                        </div>
                    </div>
                    <!-- Photo 15 -->
                    <div class="aspect-square overflow-hidden relative group cursor-pointer">
                        <img src="images/insta_restaurant.jpg"
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            alt="Instagram Photo">
                        <div
                            class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <i class="fa-brands fa-instagram text-white text-xl"></i>
                        </div>
                    </div>
                    <!-- Photo 16 -->
                    <div class="aspect-square overflow-hidden relative group cursor-pointer">
                        <img src="images/insta_table_group.jpg"
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            alt="Instagram Photo">
                        <div
                            class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <i class="fa-brands fa-instagram text-white text-xl"></i>
                        </div>
                    </div>
                    <!-- Photo 17 -->
                    <div class="aspect-square overflow-hidden relative group cursor-pointer">
                        <img src="images/insta_vineyard.jpg"
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            alt="Instagram Photo">
                        <div
                            class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <i class="fa-brands fa-instagram text-white text-xl"></i>
                        </div>
                    </div>
                    <!-- Photo 18 -->
                    <div class="aspect-square overflow-hidden relative group cursor-pointer">
                        <img src="images/insta_wedding_selfie.jpg"
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            alt="Instagram Photo">
                        <div
                            class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <i class="fa-brands fa-instagram text-white text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2. DJ BOOTH ("Misi√≥n: Pista Llena") -->
        <section id="dj-booth" class="py-24 relative bg-charcoal text-ivory">
            <div class="max-w-3xl mx-auto px-6 text-center">
                <div class="mb-6 text-5xl text-gold">
                    <i class="fa-solid fa-compact-disc fa-spin" style="animation-duration: 3s;"></i>
                </div>
                <h2 class="font-serif text-4xl md:text-5xl text-gold mb-2">Misi√≥n: Pista Llena</h2>
                <p class="font-sans text-white/70 mb-10">Ay√∫danos a armar la playlist definitiva. ¬øQu√© canci√≥n no puede
                    faltar?</p>

                <div
                    class="bg-white/5 backdrop-blur-md p-8 rounded-xl border border-white/10 shadow-2xl relative overflow-hidden">
                    <form id="dj-form" class="space-y-6 transition-opacity duration-500">
                        <div>
                            <label for="dj-song"
                                class="block text-left text-xs font-bold uppercase tracking-widest text-gold mb-2">Nombre
                                de la Canci√≥n / Artista</label>
                            <input type="text" id="dj-song" placeholder="Ej: Dancing Queen - ABBA" required
                                class="w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-gold focus:ring-1 focus:ring-gold transition-colors">
                        </div>
                        <div>
                            <label for="dj-name"
                                class="block text-left text-xs font-bold uppercase tracking-widest text-gold mb-2">Tu
                                Nombre</label>
                            <input type="text" id="dj-name" placeholder="Tu nombre" required
                                class="w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-gold focus:ring-1 focus:ring-gold transition-colors">
                        </div>
                        <button type="submit" id="dj-submit-btn"
                            class="w-full bg-gold text-charcoal font-bold py-3 rounded-lg hover:bg-white transition-colors uppercase tracking-widest flex items-center justify-center gap-2">
                            <span>Solicitar Canci√≥n üéµ</span>
                        </button>
                    </form>

                    <!-- Success Message (Hidden by default) -->
                    <div id="dj-success"
                        class="absolute inset-0 flex flex-col items-center justify-center bg-charcoal/95 backdrop-blur-sm opacity-0 pointer-events-none transition-opacity duration-500">
                        <div class="text-6xl text-gold mb-4">üéµ</div>
                        <h3 class="font-serif text-3xl text-gold mb-2">¬°Gracias por tu canci√≥n!</h3>
                        <p class="text-white/80 text-center px-6">Le diremos al DJ que vea la factibilidad de ponerla.
                            ¬°Muchas gracias!</p>
                        <button
                            onclick="document.getElementById('dj-success').classList.add('opacity-0', 'pointer-events-none'); document.getElementById('dj-form').reset();"
                            class="mt-6 text-gold text-sm uppercase tracking-wider hover:text-white transition-colors">
                            Cerrar
                        </button>
                    </div>

                    <!-- Song Requests List (Background) -->
                    <!-- Song Requests List (Fixed Layout) -->
                    <div id="song-requests-list"
                        class="mt-8 bg-white/5 p-6 rounded-xl border border-white/10 max-h-40 overflow-y-auto scrollbar-thin scrollbar-thumb-gold/30 scrollbar-track-transparent">
                        <p class="text-xs uppercase tracking-wider text-gold/60 mb-3 font-bold">Canciones Solicitadas
                        </p>
                        <div id="song-list" class="space-y-2 text-xs text-white/60 font-handwriting">
                            <!-- Songs will be added here dynamically -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. TRIVIA DEL AMOR ("¬øCu√°nto nos conoces?") -->
        <!-- 3. TRIVIA DEL AMOR ("¬øCu√°nto nos conoces?") - CAROUSEL MODE -->
        <section id="trivia" class="py-24 relative bg-ivory bg-paper-texture overflow-hidden">
            <div class="max-w-6xl mx-auto px-6">
                <div class="text-center mb-10">
                    <h2 class="font-serif text-4xl md:text-5xl text-charcoal mb-4">¬øCu√°nto nos conoces?</h2>
                    <p class="font-sans text-slate-600">Desliza para jugar üé≤</p>
                </div>

                <!-- Carousel Container (Mobile & Desktop) -->
                <form id="trivia-form"
                    class="flex overflow-x-auto snap-x snap-mandatory gap-6 pb-12 pt-10 px-4 scrollbar-hide">

                    <!-- Q1 -->
                    <div
                        class="min-w-[85vw] md:min-w-[calc(33.333%-1rem)] snap-center bg-white p-8 shadow-lg border border-gray-100 rounded-xl relative flex-shrink-0 hover:shadow-xl transition-shadow">
                        <span
                            class="absolute -top-4 -left-4 w-10 h-10 bg-sage text-white flex items-center justify-center rounded-full font-serif font-bold text-xl shadow-md">1</span>
                        <h3 class="font-serif text-xl text-charcoal mb-6 font-bold">¬øD√≥nde fue el flechazo inicial?</h3>
                        <div class="space-y-3">
                            <label class="block cursor-pointer group">
                                <input type="radio" name="q1" value="bocas" class="peer hidden" data-correct="true">
                                <div
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg peer-checked:bg-sage peer-checked:text-white peer-checked:border-sage hover:bg-gray-50 transition-all">
                                    <span class="font-bold mr-2">A.</span> Bocas del Toro
                                </div>
                            </label>
                            <label class="block cursor-pointer group">
                                <input type="radio" name="q1" value="santiago" class="peer hidden">
                                <div
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg peer-checked:bg-sage peer-checked:text-white peer-checked:border-sage hover:bg-gray-50 transition-all">
                                    <span class="font-bold mr-2">B.</span> Santiago
                                </div>
                            </label>
                            <label class="block cursor-pointer group">
                                <input type="radio" name="q1" value="other" class="peer hidden other-trigger"
                                    data-target="q1-other">
                                <div
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg peer-checked:bg-sage peer-checked:text-white peer-checked:border-sage hover:bg-gray-50 transition-all">
                                    <span class="font-bold mr-2">C.</span> Otra / Escribir respuesta
                                </div>
                            </label>
                            <input type="text" id="q1-other" placeholder="Escribe tu respuesta..."
                                class="hidden w-full mt-2 px-4 py-2 border border-sage rounded-lg focus:outline-none focus:ring-2 focus:ring-sage text-charcoal bg-white transition-all">
                        </div>
                    </div>

                    <!-- Q2 -->
                    <div
                        class="min-w-[85vw] md:min-w-[calc(33.333%-1rem)] snap-center bg-white p-8 shadow-lg border border-gray-100 rounded-xl relative flex-shrink-0 hover:shadow-xl transition-shadow">
                        <span
                            class="absolute -top-4 -right-4 w-10 h-10 bg-burgundy text-white flex items-center justify-center rounded-full font-serif font-bold text-xl shadow-md">2</span>
                        <h3 class="font-serif text-xl text-charcoal mb-6 font-bold">¬øQui√©n es m√°s probable que llegue
                            tarde a la ceremonia?</h3>
                        <div class="space-y-3">
                            <label class="block cursor-pointer group">
                                <input type="radio" name="q2" value="felipe" class="peer hidden" data-correct="true">
                                <div
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg peer-checked:bg-burgundy peer-checked:text-white peer-checked:border-burgundy hover:bg-gray-50 transition-all">
                                    <span class="font-bold mr-2">A.</span> Felipe
                                </div>
                            </label>
                            <label class="block cursor-pointer group">
                                <input type="radio" name="q2" value="camila" class="peer hidden">
                                <div
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg peer-checked:bg-burgundy peer-checked:text-white peer-checked:border-burgundy hover:bg-gray-50 transition-all">
                                    <span class="font-bold mr-2">B.</span> Camila
                                </div>
                            </label>
                            <label class="block cursor-pointer group">
                                <input type="radio" name="q2" value="other" class="peer hidden other-trigger"
                                    data-target="q2-other">
                                <div
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg peer-checked:bg-burgundy peer-checked:text-white peer-checked:border-burgundy hover:bg-gray-50 transition-all">
                                    <span class="font-bold mr-2">C.</span> Otra / Escribir respuesta
                                </div>
                            </label>
                            <input type="text" id="q2-other" placeholder="Escribe tu respuesta..."
                                class="hidden w-full mt-2 px-4 py-2 border border-burgundy rounded-lg focus:outline-none focus:ring-2 focus:ring-burgundy text-charcoal bg-white transition-all">
                        </div>
                    </div>

                    <!-- Q3 -->
                    <div
                        class="min-w-[85vw] md:min-w-[calc(33.333%-1rem)] snap-center bg-white p-8 shadow-lg border border-gray-100 rounded-xl relative flex-shrink-0 hover:shadow-xl transition-shadow">
                        <span
                            class="absolute -top-4 -left-4 w-10 h-10 bg-sage text-white flex items-center justify-center rounded-full font-serif font-bold text-xl shadow-md">3</span>
                        <h3 class="font-serif text-xl text-charcoal mb-6 font-bold">¬øCu√°l es el trago favorito de los
                            novios?</h3>
                        <div class="space-y-3">
                            <label class="block cursor-pointer group">
                                <input type="radio" name="q3" value="pisco" class="peer hidden" data-correct="true">
                                <div
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg peer-checked:bg-sage peer-checked:text-white peer-checked:border-sage hover:bg-gray-50 transition-all">
                                    <span class="font-bold mr-2">A.</span> Pisco Sour
                                </div>
                            </label>
                            <label class="block cursor-pointer group">
                                <input type="radio" name="q3" value="gin" class="peer hidden">
                                <div
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg peer-checked:bg-sage peer-checked:text-white peer-checked:border-sage hover:bg-gray-50 transition-all">
                                    <span class="font-bold mr-2">B.</span> Gin Tonic
                                </div>
                            </label>
                            <label class="block cursor-pointer group">
                                <input type="radio" name="q3" value="other" class="peer hidden other-trigger"
                                    data-target="q3-other">
                                <div
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg peer-checked:bg-sage peer-checked:text-white peer-checked:border-sage hover:bg-gray-50 transition-all">
                                    <span class="font-bold mr-2">C.</span> Otra / Escribir respuesta
                                </div>
                            </label>
                            <input type="text" id="q3-other" placeholder="Escribe tu respuesta..."
                                class="hidden w-full mt-2 px-4 py-2 border border-sage rounded-lg focus:outline-none focus:ring-2 focus:ring-sage text-charcoal bg-white transition-all">
                        </div>
                    </div>

                    <!-- Q4 -->
                    <div
                        class="min-w-[85vw] md:min-w-[calc(33.333%-1rem)] snap-center bg-white p-8 shadow-lg border border-gray-100 rounded-xl relative flex-shrink-0 hover:shadow-xl transition-shadow">
                        <span
                            class="absolute -top-4 -right-4 w-10 h-10 bg-burgundy text-white flex items-center justify-center rounded-full font-serif font-bold text-xl shadow-md">4</span>
                        <h3 class="font-serif text-xl text-charcoal mb-6 font-bold">¬øQui√©n dijo 'Te Amo' primero?</h3>
                        <div class="space-y-3">
                            <label class="block cursor-pointer group">
                                <input type="radio" name="q4" value="el" class="peer hidden" data-correct="true">
                                <div
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg peer-checked:bg-burgundy peer-checked:text-white peer-checked:border-burgundy hover:bg-gray-50 transition-all">
                                    <span class="font-bold mr-2">A.</span> √âl
                                </div>
                            </label>
                            <label class="block cursor-pointer group">
                                <input type="radio" name="q4" value="ella" class="peer hidden">
                                <div
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg peer-checked:bg-burgundy peer-checked:text-white peer-checked:border-burgundy hover:bg-gray-50 transition-all">
                                    <span class="font-bold mr-2">B.</span> Ella
                                </div>
                            </label>
                            <label class="block cursor-pointer group">
                                <input type="radio" name="q4" value="same" class="peer hidden">
                                <div
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg peer-checked:bg-burgundy peer-checked:text-white peer-checked:border-burgundy hover:bg-gray-50 transition-all">
                                    <span class="font-bold mr-2">C.</span> Fue al mismo tiempo
                                </div>
                            </label>
                            <label class="block cursor-pointer group">
                                <input type="radio" name="q4" value="other" class="peer hidden other-trigger"
                                    data-target="q4-other">
                                <div
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg peer-checked:bg-burgundy peer-checked:text-white peer-checked:border-burgundy hover:bg-gray-50 transition-all">
                                    <span class="font-bold mr-2">D.</span> Otra / Escribir respuesta
                                </div>
                            </label>
                            <input type="text" id="q4-other" placeholder="Escribe tu respuesta..."
                                class="hidden w-full mt-2 px-4 py-2 border border-burgundy rounded-lg focus:outline-none focus:ring-2 focus:ring-burgundy text-charcoal bg-white transition-all">
                        </div>
                    </div>

                    <!-- Q5 -->
                    <div
                        class="min-w-[85vw] md:min-w-[calc(33.333%-1rem)] snap-center bg-white p-8 shadow-lg border border-gray-100 rounded-xl relative flex-shrink-0 hover:shadow-xl transition-shadow">
                        <span
                            class="absolute -top-4 -left-4 w-10 h-10 bg-sage text-white flex items-center justify-center rounded-full font-serif font-bold text-xl shadow-md">5</span>
                        <h3 class="font-serif text-xl text-charcoal mb-6 font-bold">¬øA d√≥nde nos ir√≠amos de Luna de Miel
                            si fuera sorpresa?</h3>
                        <div class="space-y-3">
                            <label class="block cursor-pointer group">
                                <input type="radio" name="q5" value="playa" class="peer hidden" data-correct="true">
                                <div
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg peer-checked:bg-sage peer-checked:text-white peer-checked:border-sage hover:bg-gray-50 transition-all">
                                    <span class="font-bold mr-2">A.</span> Playa
                                </div>
                            </label>
                            <label class="block cursor-pointer group">
                                <input type="radio" name="q5" value="montana" class="peer hidden">
                                <div
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg peer-checked:bg-sage peer-checked:text-white peer-checked:border-sage hover:bg-gray-50 transition-all">
                                    <span class="font-bold mr-2">B.</span> Monta√±a
                                </div>
                            </label>
                            <label class="block cursor-pointer group">
                                <input type="radio" name="q5" value="other" class="peer hidden other-trigger"
                                    data-target="q5-other">
                                <div
                                    class="w-full px-4 py-3 border border-gray-200 rounded-lg peer-checked:bg-sage peer-checked:text-white peer-checked:border-sage hover:bg-gray-50 transition-all">
                                    <span class="font-bold mr-2">C.</span> Otra / Escribir respuesta
                                </div>
                            </label>
                            <input type="text" id="q5-other" placeholder="Escribe tu respuesta..."
                                class="hidden w-full mt-2 px-4 py-2 border border-sage rounded-lg focus:outline-none focus:ring-2 focus:ring-sage text-charcoal bg-white transition-all">
                        </div>
                    </div>

                    <!-- Result Button (Last Slide) -->
                    <div
                        class="min-w-[85vw] md:min-w-[calc(33.333%-1rem)] snap-center flex items-center justify-center flex-shrink-0 py-8">
                        <button type="button" id="trivia-submit-btn"
                            class="bg-charcoal text-ivory px-10 py-4 rounded-full font-serif text-xl hover:bg-sage transition-colors shadow-xl transform hover:-translate-y-1">
                            Ver Resultado üé≤
                        </button>
                    </div>
                </form>

                <!-- Result Modal/Section (Hidden by default) -->
                <div id="trivia-result"
                    class="hidden mt-10 text-center bg-white p-8 rounded-xl shadow-xl border border-gray-100 max-w-2xl mx-auto">
                    <h3 class="font-serif text-3xl text-charcoal mb-4">¬°Tu Resultado!</h3>
                    <p class="font-sans text-xl text-sage-dark mb-6">Obtuviste <span id="trivia-score"
                            class="font-bold text-3xl">0</span> de 5 aciertos</p>
                    <p id="trivia-message" class="font-handwriting text-2xl text-slate-600 mb-8">¬°Gracias por jugar!</p>

                    <a id="trivia-share-btn" href="#"
                        class="inline-block bg-burgundy text-white font-sans text-sm uppercase tracking-widest py-3 px-8 rounded-full hover:bg-charcoal transition-colors shadow-lg">
                        <i class="fa-solid fa-envelope mr-2"></i> Compartir con los Novios
                    </a>
                    <!-- PARCHMENT MAP ADDRESS CARD -->
                    <div
                        class="relative max-w-md mx-auto mt-12 p-8 bg-[#EAE2D6] rounded-xl shadow-sm border-2 border-dashed border-[#A89F91] transform rotate-1 hover:rotate-0 transition-transform duration-300">
                        <!-- Paper Texture Overlay -->
                        <div
                            class="absolute inset-0 rounded-xl bg-[url('https://www.transparenttextures.com/patterns/natural-paper.png')] opacity-40 pointer-events-none mix-blend-multiply">
                        </div>

                        <div class="relative z-10 flex flex-col items-center text-center space-y-4">
                            <!-- Map Pin Icon -->
                            <div class="text-[#556B2F] text-4xl mb-2 drop-shadow-sm">
                                <i class="fa-solid fa-location-dot"></i>
                            </div>

                            <!-- Address Text -->
                            <h3 class="font-serif text-2xl md:text-3xl text-[#2C241E] leading-tight">
                                Avenida El Valle 147, Casa 10
                            </h3>

                            <!-- Location Text -->
                            <p
                                class="font-sans text-sm md:text-base text-[#556B2F] uppercase tracking-[0.15em] font-medium">
                                Chicureo, Santiago
                            </p>
                        </div>
                    </div>
                    <script>
                        document.getElementById('trivia-submit-btn').addEventListener('click', function () {
                            let score = 0;
                            const total = 5;
                            const form = document.getElementById('trivia-form');

                            // Check answers
                            for (let i = 1; i <= total; i++) {
                                const selected = form.querySelector(`input[name="q${i}"]:checked`);
                                if (selected && selected.dataset.correct === "true") {
                                    score++;
                                }
                            }

                            // Update UI
                            document.getElementById('trivia-score').innerText = score;

                            let message = "";
                            if (score === 5) message = "¬°Nos conoces mejor que nosotros mismos! üò±‚ù§Ô∏è";
                            else if (score >= 3) message = "¬°Muy bien! Se nota que eres cercano/a üòâ";
                            else message = "¬°Ups! Toca juntarnos m√°s seguido üçª";

                            document.getElementById('trivia-message').innerText = message;

                            // Update Share Link
                            const subject = encodeURIComponent("Mi resultado de la Trivia de Felipe y Camila");
                            const body = encodeURIComponent(`¬°Hola chicos!\n\nAcabo de jugar su trivia y obtuve ${score} de 5 puntos.\n\n${message}\n\n¬°Nos vemos en el matri!`);
                            const mailtoLink = `mailto:felipeycamila.v@gmail.com?subject=${subject}&body=${body}`;

                            document.getElementById('trivia-share-btn').href = mailtoLink;

                            // Show Result
                            document.getElementById('trivia-result').classList.remove('hidden');
                            document.getElementById('trivia-result').scrollIntoView({ behavior: 'smooth' });
                        });
                    </script>
                </div>

                <!-- Scroll Indicator for RSVP -->
                <div class="absolute bottom-4 left-0 right-0 text-center animate-bounce z-10 pointer-events-none">
                    <p class="text-xs uppercase tracking-widest text-charcoal/50 mb-1">Confirmar Asistencia abajo</p>
                    <i class="fa-solid fa-chevron-down text-charcoal/50 text-xl"></i>
                </div>
        </section>

        <!-- NEW INTERACTIVE SECTIONS END -->

        <!-- F. RSVP (PARTY MODE) -->
        <section id="rsvp" class="py-32 bg-night relative overflow-hidden">
            <div class="max-w-xl mx-auto px-4 w-full relative z-10 reveal">
                <div class="glass p-8 md:p-12 rounded-2xl shadow-2xl border border-white/10 bg-white/5">
                    <div class="text-center mb-10">
                        <h2 class="font-serif text-4xl text-white mb-4">Confirmar Asistencia</h2>
                        <p class="font-sans text-white/60 text-sm">¬°No te quedes fuera de la fiesta!</p>
                    </div>

                    <form id="rsvp-form" class="space-y-6">
                        <div class="space-y-4">
                            <input type="text" id="rsvp-name" placeholder="Tu Nombre" required
                                class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:border-white">
                            <input type="email" id="rsvp-email" placeholder="Tu Correo (Opcional)"
                                class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:border-white">
                            <input type="tel" id="rsvp-whatsapp" placeholder="Tu WhatsApp" required
                                class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:border-white">

                            <!-- Partner Attendance -->
                            <div class="space-y-3">
                                <label class="flex items-center space-x-3 cursor-pointer">
                                    <input type="checkbox" id="has-partner"
                                        class="w-5 h-5 rounded border-white/20 bg-white/10 text-gold focus:ring-gold">
                                    <span class="text-white/80 text-sm">¬øVienes con pareja?</span>
                                </label>
                                <input type="text" id="partner-name" placeholder="Nombre de tu pareja"
                                    class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:border-white hidden">
                            </div>

                            <button type="submit" id="rsvp-submit-btn"
                                class="w-full bg-gold text-night font-bold py-4 uppercase tracking-widest hover:bg-white transition-colors duration-300 mt-4 shadow-[0_0_20px_rgba(197,160,89,0.3)] hover:shadow-[0_0_30px_rgba(255,255,255,0.5)]">
                                De ah√≠ somos!
                            </button>
                        </div>

                        <!-- Success Message (Hidden by default) -->
                        <div id="rsvp-success"
                            class="hidden bg-white/10 border-2 border-gold rounded-lg p-6 text-center">
                            <i class="fa-solid fa-heart text-gold text-4xl mb-3"></i>
                            <h3 class="text-white font-serif text-2xl mb-2">¬°Confirmaci√≥n Recibida!</h3>
                            <p class="text-white/80 text-sm mb-4">Estamos muy contentos de que nos acompa√±es en este d√≠a
                                tan importante. ¬°Muchas gracias y nos vemos en la fiesta!</p>
                            <button
                                onclick="document.getElementById('rsvp-success').classList.add('hidden'); document.getElementById('rsvp-form').reset();"
                                class="text-gold text-sm uppercase tracking-wider hover:text-white transition-colors">
                                Cerrar
                            </button>
                        </div>
                    </form>

                    <div class="mt-12 text-center border-t border-white/10 pt-8">
                        <p class="font-serif text-lg text-white/80 mb-4">Lista de Novios</p>
                        <a href="#"
                            class="text-gold text-sm uppercase tracking-widest hover:text-white transition-colors border-b border-gold hover:border-white pb-1">
                            Tiendas Paris - C√≥digo: 21030724
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- G. RELIGIOUS WEDDING TEASER ("Coming Soon") -->
        <section id="religious-wedding" class="relative py-32 overflow-hidden">
            <!-- Background Image with Overlay -->
            <div class="absolute inset-0 z-0">
                <img src="images/religious_wedding.jpg" alt="Centro de Eventos Arboledas"
                    class="w-full h-full object-cover grayscale opacity-40 hover:grayscale-0 hover:opacity-60 transition-all duration-1000">
                <div class="absolute inset-0 bg-gradient-to-t from-charcoal via-charcoal/80 to-transparent"></div>
            </div>

            <div class="relative z-10 max-w-4xl mx-auto px-6 text-center text-ivory">
                <div class="mb-6">
                    <span
                        class="inline-block px-4 py-1 border border-gold/50 rounded-full text-gold text-xs uppercase tracking-[0.2em] mb-4">Pr√≥ximamente</span>
                </div>
                <h2 class="font-serif text-4xl md:text-6xl text-white mb-6">La Boda Religiosa</h2>
                <div
                    class="flex flex-col md:flex-row items-center justify-center gap-6 md:gap-12 text-white/80 font-sans mb-10">
                    <div class="flex items-center gap-2">
                        <i class="fa-regular fa-calendar text-gold"></i>
                        <span>23 de Octubre 2026 (Tentativo)</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <i class="fa-solid fa-location-dot text-gold"></i>
                        <span>Centro de Eventos Arboledas</span>
                    </div>
                </div>

                <div class="max-w-xl mx-auto bg-white/5 backdrop-blur-sm border border-white/10 p-8 rounded-xl">
                    <p class="font-serif italic text-lg mb-6">"Lo mejor est√° por venir..."</p>
                    <button disabled
                        class="bg-white/10 text-white/50 px-8 py-3 rounded-full uppercase tracking-widest text-sm cursor-not-allowed border border-white/10">
                        Inscripciones Pr√≥ximamente
                    </button>
                    <p class="text-xs text-white/30 mt-4 uppercase tracking-widest">Enfocados en el Civil por ahora ‚ù§Ô∏è
                    </p>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-night text-white/20 text-center py-12 border-t border-white/5">
        <div class="max-w-4xl mx-auto px-4">
            <div class="font-serif text-2xl mb-4 text-white/40">F&C</div>
            <p class="text-[10px] uppercase tracking-widest">
                &copy; 2026 Felipe & Camila. Nos vemos en la pista.
            </p>
        </div>
    </footer>

    <!-- Scripts -->
    <!-- Supabase JS (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Instagram Carousel Script -->
    <script>
        const instaScroll = document.getElementById('insta-scroll');
        const dots = document.querySelectorAll('#instagram .rounded-full'); // Select dots within Instagram section

        if (instaScroll && dots.length === 2) {
            instaScroll.addEventListener('scroll', () => {
                const scrollPosition = instaScroll.scrollLeft;
                const width = instaScroll.clientWidth;
                const index = Math.round(scrollPosition / width);

                // Update dots
                if (index === 0) {
                    dots[0].classList.remove('bg-gray-300');
                    dots[0].classList.add('bg-charcoal');
                    dots[1].classList.remove('bg-charcoal');
                    dots[1].classList.add('bg-gray-300');
                } else {
                    dots[0].classList.remove('bg-charcoal');
                    dots[0].classList.add('bg-gray-300');
                    dots[1].classList.remove('bg-gray-300');
                    dots[1].classList.add('bg-charcoal');
                }
            });
        }
    </script>

    <!-- Custom Supabase Client -->
    <!-- Persistent RSVP CTA -->
    <a href="#rsvp" id="rsvp-cta"
        class="fixed bottom-0 left-0 w-full bg-ivory/95 backdrop-blur-sm border-t border-sage/30 py-4 z-40 text-center shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] transition-transform duration-500">
        <div class="flex flex-col items-center justify-center gap-1">
            <span class="font-serif text-sm md:text-base tracking-[0.2em] text-charcoal uppercase">Confirmar Asistencia
                Abajo</span>
            <i class="fa-solid fa-chevron-down text-sage-dark animate-bounce"></i>
        </div>
    </a>

    <!-- Scroll Handling Script for CTA -->
    <script>
        window.addEventListener('scroll', function () {
            const rsvpSection = document.getElementById('rsvp');
            const cta = document.getElementById('rsvp-cta');

            if (rsvpSection && cta) {
                const rect = rsvpSection.getBoundingClientRect();
                const isVisible = (rect.top <= window.innerHeight) && (rect.bottom >= 0);

                // Hide CTA when RSVP section is visible
                if (isVisible) {
                    cta.style.transform = 'translateY(100%)';
                } else {
                    cta.style.transform = 'translateY(0)';
                }
            }
        });
    </script>

    <script src="js/supabase-client.js"></script>
    <script>
        // 1. Envelope Intro & Navigation Reveal
        // 1. Envelope Intro & Navigation Reveal
        const openBtn = document.getElementById('open-invite');
        const overlay = document.getElementById('envelope-overlay');
        const body = document.body;
        const nav = document.getElementById('main-nav');

        if (openBtn) {
            openBtn.addEventListener('click', () => {
                overlay.style.transform = 'translateY(-100%)';
                setTimeout(() => {
                    body.classList.remove('locked');
                    nav.classList.add('visible');
                    checkReveal(); // Trigger reveal for Hero section
                }, 1000);
            });
        }

        // 2. Scroll Reveal & Sticky Nav
        const reveals = document.querySelectorAll('.reveal');
        const checkReveal = () => {
            const triggerBottom = window.innerHeight * 0.85;
            reveals.forEach(reveal => {
                const top = reveal.getBoundingClientRect().top;
                if (top < triggerBottom) reveal.classList.add('active');
            });

            // Sticky Nav Background
            if (window.scrollY > 50) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        };
        window.addEventListener('scroll', checkReveal);

        // 3. INTERACTIVE SECTIONS LOGIC

        // Check Auth State
        async function checkAuth() {
            if (typeof window.getCurrentUser !== 'function') return;
            const user = await window.getCurrentUser();

            const authOverlay = document.getElementById('guest-auth-overlay');
            const uploaderName = document.getElementById('uploader-name');
            const photoUpload = document.getElementById('photo-upload');
            const uploadBtn = document.getElementById('upload-btn');

            if (user) {
                // User is logged in
                if (authOverlay) authOverlay.classList.add('hidden');
                if (uploaderName) {
                    uploaderName.value = user.user_metadata.full_name || user.email.split('@')[0];
                    uploaderName.disabled = false;
                }
                if (photoUpload) photoUpload.disabled = false;
                if (uploadBtn) uploadBtn.disabled = false;
            } else {
                // User is logged out (default state is locked)
            }
        }

        // Login Button Logic
        const loginGoogleBtn = document.getElementById('login-google-btn');
        const toggleEmailBtn = document.getElementById('toggle-email-btn');
        const emailForm = document.getElementById('email-auth-form');
        const loginEmailBtn = document.getElementById('login-email-btn');

        if (loginGoogleBtn) {
            loginGoogleBtn.addEventListener('click', async () => {
                loginGoogleBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Conectando...';
                await window.signInWithGoogle();
            });
        }

        if (toggleEmailBtn) {
            toggleEmailBtn.addEventListener('click', () => {
                emailForm.classList.toggle('hidden');
            });
        }

        if (loginEmailBtn) {
            loginEmailBtn.addEventListener('click', async () => {
                const email = document.getElementById('auth-email-input').value;
                if (!email) return alert('Ingresa tu correo');
                loginEmailBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Enviando...';
                const { error } = await window.signInWithEmail(email);
                if (error) {
                    alert('Error: ' + error.message);
                    loginEmailBtn.innerText = 'Enviar Link M√°gico';
                } else {
                    alert('¬°Revisa tu correo! Te enviamos un link m√°gico.');
                    loginEmailBtn.innerText = 'Link Enviado';
                }
            });
        }

        // Upload Logic
        const uploadBtn = document.getElementById('upload-btn');
        const photoInput = document.getElementById('photo-upload');
        const uploaderNameInput = document.getElementById('uploader-name');
        const statusMsg = document.getElementById('upload-status');
        const uploaderEmailInput = document.getElementById('uploader-email');

        if (uploadBtn) {
            uploadBtn.addEventListener('click', async () => {
                const file = photoInput.files[0];
                const name = uploaderNameInput.value;
                const email = uploaderEmailInput.value || 'No proporcionado';

                if (!file) return alert('Selecciona una foto');
                if (!name) return alert('Ingresa tu nombre');

                uploadBtn.disabled = true;
                uploadBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Subiendo...';

                const { data, error } = await window.uploadGuestPhoto(file, name, email, '');

                if (error) {
                    console.error(error);
                    alert('Error al subir: ' + error.message);
                    uploadBtn.disabled = false;
                    uploadBtn.innerHTML = '<i class="fa-solid fa-cloud-arrow-up mr-2"></i> Subir Foto';
                } else {
                    // Reload gallery to show new photo
                    if (typeof loadGallery === 'function') {
                        await loadGallery();
                    }

                    // Send email notification (note: mailto only opens email client, doesn't auto-send)
                    await window.sendPhotoUploadNotification(name, email);

                    // Show thank you popup
                    statusMsg.classList.remove('hidden');
                    statusMsg.innerHTML = `
                        <div class="bg-sage-light/20 border-2 border-sage rounded-lg p-6 text-center">
                            <i class="fa-solid fa-circle-check text-5xl text-sage-dark mb-4"></i>
                            <h3 class="text-2xl font-serif text-charcoal mb-2">¬°Gracias ${name}!</h3>
                            <p class="text-sage-dark mb-4">Tu foto se ha subido exitosamente. Revisa el carrusel abajo para verla.</p>
                            <p class="text-xs text-gray-500 mb-4">Nota: Para notificar a los novios, env√≠ales un mensaje directamente.</p>
                            <button onclick="this.closest('.bg-sage-light\\/20').parentElement.classList.add('hidden')" 
                                    class="bg-charcoal text-white px-6 py-2 rounded-full hover:bg-sage transition-colors">
                                Cerrar
                            </button>
                        </div>
                    `;

                    uploadBtn.innerHTML = '<i class="fa-solid fa-check mr-2"></i> Listo';

                    // Reset form after 3 seconds
                    setTimeout(() => {
                        photoInput.value = '';
                        uploaderNameInput.value = '';
                        uploaderEmailInput.value = '';
                        uploadBtn.disabled = false;
                        uploadBtn.innerHTML = '<i class="fa-solid fa-cloud-arrow-up mr-2"></i> Subir Foto';
                    }, 3000);
                }
            });
        }

        // Initialize Auth Check
        setTimeout(checkAuth, 1000);

        // A. Guest Cam Logic
        // const uploadBtn = document.getElementById('upload-btn'); // Already defined above
        // const uploadStatus = document.getElementById('upload-status'); // Already defined above
        const galleryContainer = document.getElementById('guest-gallery');

        // Load Gallery on Page Load
        async function loadGallery() {
            // Keep the static examples if fetch fails or returns empty
            // But we want to append real photos if they exist
            if (typeof window.fetchGuestPhotos !== 'function') return;

            const { data, error } = await window.fetchGuestPhotos();

            if (error) {
                console.error("Could not load gallery:", error);
                galleryContainer.innerHTML = '<div class="text-red-400 text-xs">Error al cargar fotos</div>';
                return;
            }

            if (data && data.length > 0) {
                // Prepend real photos to the existing static examples
                const realPhotosHtml = data.map(photo => `
                    <div class="min-w-[220px] aspect-[4/5] relative flex-shrink-0 bg-white p-2 shadow-md transform hover:rotate-1 transition-transform snap-center">
                        <img src="${photo.url}" class="w-full h-full object-cover">
                        <div class="absolute bottom-4 left-2 right-2 flex items-center justify-center gap-2 bg-white/90 backdrop-blur-sm py-1 rounded-full shadow-sm">
                            <div class="w-6 h-6 rounded-full bg-sage text-white flex items-center justify-center text-xs font-bold">
                                ${photo.uploader_name ? photo.uploader_name[0].toUpperCase() : 'A'}
                            </div>
                            <span class="font-handwriting text-charcoal text-sm truncate">${photo.uploader_name || 'An√≥nimo'}</span>
                        </div>
                    </div>
                `).join('');

                // Insert before the first child (static examples)
                galleryContainer.insertAdjacentHTML('afterbegin', realPhotosHtml);
            } else {
                galleryContainer.innerHTML = '<div class="min-w-[200px] flex items-center justify-center bg-gray-100 rounded-lg text-gray-400 text-xs">S√© el primero en subir una foto üì∏</div>';
            }
        }

        // RSVP Form Handler
        const rsvpForm = document.getElementById('rsvp-form');
        const hasPartnerCheckbox = document.getElementById('has-partner');
        const partnerNameInput = document.getElementById('partner-name');
        const rsvpSuccess = document.getElementById('rsvp-success');

        // Toggle partner name field
        if (hasPartnerCheckbox) {
            hasPartnerCheckbox.addEventListener('change', () => {
                if (hasPartnerCheckbox.checked) {
                    partnerNameInput.classList.remove('hidden');
                } else {
                    partnerNameInput.classList.add('hidden');
                    partnerNameInput.value = '';
                }
            });
        }

        // Handle RSVP form submission
        if (rsvpForm) {
            rsvpForm.addEventListener('submit', async (e) => {
                e.preventDefault();

                const name = document.getElementById('rsvp-name').value;
                const email = document.getElementById('rsvp-email').value || 'No proporcionado';
                const whatsapp = document.getElementById('rsvp-whatsapp').value;
                const hasPartner = hasPartnerCheckbox.checked;
                const partnerName = hasPartner ? partnerNameInput.value : '';

                const submitBtn = document.getElementById('rsvp-submit-btn');
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Enviando...';

                // Send email notification using Web3Forms
                const formData = new FormData();
                formData.append('access_key', 'YOUR_WEB3FORMS_KEY');
                formData.append('subject', `Nueva Confirmaci√≥n de Asistencia: ${name}`);
                formData.append('from_name', 'Sitio Web - Felipe y Camila');
                formData.append('to_email', 'camilayfelipe.v@gmail.com');

                let message = `Nombre: ${name}\nEmail: ${email}\nWhatsApp: ${whatsapp}`;
                if (hasPartner) {
                    message += `\n\n¬øViene con pareja?: S√≠\nNombre de pareja: ${partnerName}`;
                } else {
                    message += `\n\n¬øViene con pareja?: No`;
                }
                formData.append('message', message);

                try {
                    const response = await fetch('https://api.web3forms.com/submit', {
                        method: 'POST',
                        body: formData
                    });

                    const result = await response.json();

                    if (result.success) {
                        // Show success message
                        rsvpForm.classList.add('hidden');
                        rsvpSuccess.classList.remove('hidden');
                    } else {
                        alert('Hubo un error al enviar tu confirmaci√≥n. Por favor, intenta de nuevo.');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('Hubo un error al enviar tu confirmaci√≥n. Por favor, intenta de nuevo.');
                }

                submitBtn.disabled = false;
                submitBtn.innerHTML = 'De ah√≠ somos!';
            });
        }

        // DJ Song Request Form Handler
        const djForm = document.getElementById('dj-form');
        const djSuccess = document.getElementById('dj-success');
        const songList = document.getElementById('song-list');

        if (djForm) {
            djForm.addEventListener('submit', async (e) => {
                e.preventDefault();

                const song = document.getElementById('dj-song').value;
                const name = document.getElementById('dj-name').value;
                const submitBtn = document.getElementById('dj-submit-btn');

                submitBtn.disabled = true;
                submitBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Enviando...';

                // Send email notification
                const formData = new FormData();
                formData.append('access_key', 'YOUR_WEB3FORMS_KEY');
                formData.append('subject', 'Nueva Solicitud de Canci√≥n - Misi√≥n: Pista Llena');
                formData.append('from_name', 'Sitio Web - Felipe y Camila');
                formData.append('to_email', 'camilayfelipe.v@gmail.com');
                formData.append('message', `Canci√≥n: ${song}\nSolicitada por: ${name}`);

                try {
                    const response = await fetch('https://api.web3forms.com/submit', {
                        method: 'POST',
                        body: formData
                    });

                    const result = await response.json();

                    if (result.success) {
                        // Show success message
                        djSuccess.classList.remove('opacity-0', 'pointer-events-none');

                        // Add song to list
                        const songItem = document.createElement('div');
                        songItem.className = 'text-white/70 leading-relaxed';
                        songItem.innerHTML = `<span class="text-gold">‚ô™</span> ${song} <span class="text-white/40">- solicitada por ${name}</span>`;
                        songList.appendChild(songItem);

                        // Hide success message after 3 seconds
                        setTimeout(() => {
                            djSuccess.classList.add('opacity-0', 'pointer-events-none');
                            djForm.reset();
                        }, 3000);
                    } else {
                        alert('Hubo un error al enviar tu solicitud. Por favor, intenta de nuevo.');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('Hubo un error al enviar tu solicitud. Por favor, intenta de nuevo.');
                }

                submitBtn.disabled = false;
                submitBtn.innerHTML = '<span>Solicitar Canci√≥n üéµ</span>';
            });
        }

        // Handle Upload
        // Guest Cam Upload
        document.getElementById('guest-photo-input').addEventListener('change', async (e) => {
            const file = e.target.files[0];
            const uploaderName = document.getElementById('uploader-name').value;
            const uploaderEmail = document.getElementById('uploader-email').value;
            const uploaderWhatsapp = document.getElementById('uploader-whatsapp').value;

            if (!file) return;
            if (!uploaderName) {
                alert('Por favor ingresa tu nombre antes de subir una foto.');
                return;
            }

            const btn = document.querySelector('button[onclick="document.getElementById(\'guest-photo-input\').click()"]'); // This selector is tricky because the button triggers the input. 
            // Actually, the input change triggers this. We should probably show a loading state on the upload area or a specific button if there was one.
            // The current UI has a div acting as a button. Let's just use a simple alert for status for now as per previous implementation style, or better, update the UI.

            // Let's show a simple loading indicator
            const uploadArea = e.target.parentElement; // The div wrapping the input
            const originalContent = uploadArea.innerHTML;
            uploadArea.innerHTML = '<div class="text-white"><i class="fas fa-spinner fa-spin text-2xl"></i><p class="mt-2">Subiendo...</p></div>';

            const { data, error } = await uploadGuestPhoto(file, uploaderName, uploaderEmail, uploaderWhatsapp);

            if (error) {
                alert('Error al subir la foto. Por favor intenta de nuevo.');
                uploadArea.innerHTML = originalContent;
            } else {
                alert('¬°Foto subida con √©xito! Gracias por compartir este momento.');
                uploadArea.innerHTML = originalContent;
                // Refresh gallery
                loadGuestGallery();
                // Clear inputs
                document.getElementById('uploader-name').value = '';
                document.getElementById('uploader-email').value = '';
                document.getElementById('uploader-whatsapp').value = '';
            }
        });

        // Initialize Gallery
        // Wait a bit for Supabase script to load
        setTimeout(loadGallery, 1000);


        // B. DJ Booth Form Simulation
        // The original DJ Booth simulation logic is replaced by the new D. DJ Booth Logic below.
        // Keeping the original form elements and their IDs for the new logic.

        // C. Trivia Logic
        let triviaAnswers = {};
        let triviaScore = 0;

        // Handle Option Selection
        document.querySelectorAll('.trivia-option').forEach(button => {
            button.addEventListener('click', function () {
                const parent = this.closest('.trivia-card');
                const questionIndex = Array.from(document.querySelectorAll('.trivia-card')).indexOf(parent);

                // Visual Selection
                parent.querySelectorAll('.trivia-option').forEach(btn => {
                    btn.classList.remove('bg-white/20', 'border-white');
                    btn.classList.add('bg-white/5', 'border-white/10');
                });
                this.classList.remove('bg-white/5', 'border-white/10');
                this.classList.add('bg-white/20', 'border-white');

                // Logic
                const isCorrect = this.dataset.correct === 'true';
                const answerText = this.innerText;

                // Special handling for "Other"
                // Check if the button itself is the "Other" option
                if (this.dataset.value === 'other') { // Assuming a data-value="other" on the button
                    const input = parent.querySelector('input[type="text"][id$="-other"]');
                    if (input) {
                        input.classList.remove('hidden');
                        input.focus();
                        // We'll capture the input value on submit
                        triviaAnswers[questionIndex] = { type: 'other', element: input };
                    }
                } else {
                    // Hide other input if visible
                    const input = parent.querySelector('input[type="text"][id$="-other"]');
                    if (input) input.classList.add('hidden');

                    triviaAnswers[questionIndex] = {
                        answer: answerText,
                        correct: isCorrect
                    };
                }
            });
        });

        // Handle Trivia Submit
        document.getElementById('trivia-submit-btn').addEventListener('click', async function () {
            let score = 0;
            let finalAnswers = {};

            // Calculate Score & Gather Answers
            for (let i = 0; i < 5; i++) { // Assuming 5 trivia questions
                const answerData = triviaAnswers[i];
                if (answerData) {
                    if (answerData.type === 'other') {
                        finalAnswers[`question_${i + 1}`] = `Otra: ${answerData.element.value}`;
                        // "Other" is usually considered correct or neutral, let's give points for participation
                        score += 10;
                    } else {
                        finalAnswers[`question_${i + 1}`] = answerData.answer;
                        if (answerData.correct) score += 20;
                    }
                } else {
                    finalAnswers[`question_${i + 1}`] = 'No respondida';
                }
            }

            // Show Result
            alert(`¬°Tu puntaje es: ${score}/100! Guardando resultados...`);

            // Save to Supabase
            // Generate a random user ID for now since we don't have full auth yet
            const userId = 'guest_' + Math.random().toString(36).substr(2, 9);
            // Assuming saveTriviaResult function exists in supabase-client.js
            if (typeof window.saveTriviaResult === 'function') {
                const { data, error } = await window.saveTriviaResult(score, finalAnswers, userId);

                if (error) {
                    console.error('Error saving trivia:', error);
                    alert('Hubo un error al guardar tu puntaje, pero ¬°gracias por jugar!');
                } else {
                    alert('¬°Resultados guardados! Veremos qui√©n conoce m√°s a los novios.');
                }
            } else {
                console.warn('saveTriviaResult function not found. Trivia results not saved to Supabase.');
                alert('¬°Gracias por participar! Veremos si acertaste en la fiesta üçπ (Resultados no guardados)');
            }
        });

        // D. DJ Booth Logic
        async function handleSongRequest(event) {
            event.preventDefault();

            const songName = document.getElementById('song-name').value;
            const artistName = document.getElementById('artist-name').value;
            const requesterName = document.getElementById('requester-name').value;
            const btn = document.getElementById('dj-submit-btn'); // Use the existing ID
            const originalBtnContent = btn.innerHTML; // Store original content
            const successMsg = document.getElementById('dj-success'); // Use the existing ID

            // UI Loading
            btn.disabled = true;
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Enviando...'; // Update button content

            // Save to Supabase (using the new table we created in SQL)
            // Note: We need to ensure the table exists. If the user hasn't run the SQL yet, this might fail.
            // We'll wrap in try/catch and fallback to simulation if needed.

            try {
                if (window.supabase) { // Check if supabase client is available
                    const { error } = await supabase
                        .from('song_requests') // Assuming 'song_requests' is the table name
                        .insert([{
                            song_name: songName,
                            artist_name: artistName,
                            requester_name: requesterName
                        }]);

                    if (error) throw error;
                } else {
                    // Fallback simulation if Supabase client is not available
                    console.warn('Supabase client not found. Simulating song request.');
                    await new Promise(r => setTimeout(r, 1500));
                }

                // Success UI
                successMsg.classList.remove('opacity-0', 'pointer-events-none'); // Show success message
                document.getElementById('dj-form').reset(); // Reset form

                // Reset button and hide success after delay
                setTimeout(() => {
                    btn.disabled = false;
                    btn.innerHTML = originalBtnContent; // Restore original button content
                    successMsg.classList.add('opacity-0', 'pointer-events-none'); // Hide success message
                }, 3000);

            } catch (err) {
                console.error('Error requesting song:', err);
                alert('Error al enviar la solicitud. Intenta de nuevo.');
                btn.disabled = false;
                btn.innerHTML = originalBtnContent; // Restore original button content
            }
        }
        // Attach the new handler to the form's submit event
        document.getElementById('dj-form').addEventListener('submit', handleSongRequest);

    </script>
</body>

</html>